<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!-- blank favicon -->
    <link href="data:image/x-icon;base64,iVBORw0KGgo=" rel="icon" type="image/x-icon" />
    <title>AR demo</title>

    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <!--
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    -->

    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

    <style>
        body 
        { 
            margin: 0; 
            overflow: hidden; 
        }
    </style>

</head>
<body>


<!-- 
    cameraParametersUrl: uses local data, so internet connection not required
    logarithmicDepthBuffer: reduces z-fighting when marker is at greater distance from camera
    ar-js: optional to include for offline version: cameraParametersUrl: data/camera_para.dat
 -->
<a-scene embedded
    shadow="type: pcfsoft"
    vr-mode-ui="enabled: false"
    arjs="detectionMode: mono_and_matrix; matrixCodeType: 3x3; "
    renderer="logarithmicDepthBuffer: true;">

    <!--
        boxes must be raised for bottom side to "sit" on AR marker surface
        <a-box position="0 0.5 0" color="red" material="transparent:true; opacity:0.50;"></a-box>
    -->

    <!--
    <a-marker type="barcode" value="0" smooth="true">
        <a-plane color="red" rotation="-90 0 0" material="transparent:true; opacity:0.50;">
            <a-entity text="value: Hello\nWorld; align:center; color:navy; width:8.0;" position="0 0 0.01">
            </a-entity>
        </a-plane>
    </a-marker>
    -->

    <a-entity camera>
        <a-entity light="type: ambient; color: #888"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 1.8" position="-0.5 1 1"></a-entity>
    </a-entity> 
</a-scene>


<script>
function createBarcodeMarker(id) 
{
    const marker = document.createElement('a-marker');
    marker.setAttribute('type', 'barcode');
    marker.setAttribute('value', String(id));

    const plane = document.createElement('a-plane');
    plane.setAttribute('color', '#00ff00');
    plane.setAttribute('opacity', 0.4);
    plane.setAttribute('rotation', '-90 0 0');
    plane.setAttribute('position', '0 0.001 0');
    plane.setAttribute('material', 'side: double;');
    marker.appendChild(plane);

    // numeric label (marker ID), centered on the square
    const label = document.createElement('a-entity');
    label.setAttribute('text', `value: _${id}_; align:center; side:double; color: navy; width: 8.0;`);
    label.setAttribute('position', '0 0 0.01');
    //label.setAttribute('material', 'side: double;');
    plane.appendChild(label);

    return marker;
}


const scene = document.querySelector('a-scene');

for (let i = 0; i < 64; i++)
    scene.appendChild( createBarcodeMarker(i) );

</script>

</body>
</html>



